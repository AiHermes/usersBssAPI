#!/bin/bash

echo "üî™ –ü—Ä–æ–≤–µ—Ä—è—é –∏ –æ—á–∏—â–∞—é –ø–æ—Ä—Ç 8000..."
PID_8000=$(lsof -ti :8000)

if [ -n "$PID_8000" ]; then
  echo "‚ùó –ù–∞–π–¥–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 8000 (PID $PID_8000). –£–±–∏–≤–∞—é..."
  kill -9 $PID_8000
else
  echo "‚úÖ –ü–æ—Ä—Ç 8000 —Å–≤–æ–±–æ–¥–µ–Ω"
fi

echo "üîé –ò—â—É –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã ngrok..."
NGROK_PIDS=$(ps aux | grep '[n]grok' | awk '{print $2}')

if [ -n "$NGROK_PIDS" ]; then
  echo "‚ùó –ù–∞–π–¥–µ–Ω—ã –ø—Ä–æ—Ü–µ—Å—Å—ã ngrok:"
  echo "$NGROK_PIDS"
  for PID in $NGROK_PIDS; do
    echo "‚õî –£–±–∏–≤–∞—é ngrok (PID $PID)..."
    kill -9 $PID
  done
else
  echo "‚úÖ –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ ngrok"
fi

echo "üßπ –û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–µ—Ä–≤–µ—Ä –∏ ngrok –≤—Ä—É—á–Ω—É—é."