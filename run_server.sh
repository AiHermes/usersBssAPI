#!/bin/bash

echo "üî™ –ü—Ä–æ–≤–µ—Ä—è—é –∏ –æ—á–∏—â–∞—é –ø–æ—Ä—Ç 8000..."
PID_8000=$(lsof -ti :8000)

if [ -n "$PID_8000" ]; then
  echo "‚ùó –ù–∞–π–¥–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 8000 (PID $PID_8000). –£–±–∏–≤–∞—é..."
  kill -9 $PID_8000
else
  echo "‚úÖ –ü–æ—Ä—Ç 8000 —Å–≤–æ–±–æ–¥–µ–Ω"
fi

# üîÑ –ù–ï —É–±–∏–≤–∞–µ–º ngrok ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ–º –ø—Ä–æ—Ü–µ—Å—Å—ã –∞–∫—Ç–∏–≤–Ω—ã–º–∏
echo "‚úÖ –ü—Ä–æ–ø—É—Å–∫–∞—é –æ—Å—Ç–∞–Ω–æ–≤–∫—É ngrok. –ï—Å–ª–∏ –æ–Ω –∑–∞–ø—É—â–µ–Ω ‚Äî –ø—É—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç."

echo "üöÄ –ó–∞–ø—É—Å–∫–∞—é —Å–µ—Ä–≤–µ—Ä FastAPI (uvicorn)..."
uvicorn main:app --reload
